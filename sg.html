<!DOCTYPE html>
<html>
<head>
    <title>Material SG Calculator</title>
    <script>
        function submitForm() {
            // Collect the values from the form
            const code = document.getElementById("code").value;
            const polymer = document.getElementById("polymer").value;
            const colour = document.getElementById("colour").value;
            let weightD = document.getElementById("weightD").value;
            let weightE = document.getElementById("weightE").value;
            let weightF = document.getElementById("weightF").value;

            // Check if any required field is empty or invalid
            if (!code || !polymer || !colour || !weightD || !weightE || !weightF) {
                alert("Please fill in all fields.");
                return;
            }

            // Ensure values are parsed as floats and formatted to two decimal places
            weightD = parseFloat(weightD).toFixed(2);
            weightE = parseFloat(weightE).toFixed(2);
            weightF = parseFloat(weightF).toFixed(2);

            // Send the data via a GET request
            fetch(`https://script.google.com/macros/s/AKfycbxLMXa3LQ202a3xHWlIddtEThqjqMCabYIDU-Bz0zuSCwBrPm0DcULxsWukpGvy4_HY/exec?code=${encodeURIComponent(code)}&polymer=${encodeURIComponent(polymer)}&colour=${encodeURIComponent(colour)}&weightD=${encodeURIComponent(weightD)}&weightE=${encodeURIComponent(weightE)}&weightF=${encodeURIComponent(weightF)}`)
            .then(response => response.json())
            .then(data => {
                // Display the SG value after calculation
                if (data.error) {
                    document.getElementById("result").innerText = data.error;
                } else {
                    document.getElementById("result").innerText = `SG Value: ${data.sgValue} g/cc`;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById("result").innerText = "An error occurred. Please try again.";
            });
        }
    </script>
</head>
<body>
    <h2>Enter Material Details</h2>
    <form onsubmit="event.preventDefault(); submitForm();">
        <label for="code">Code:</label><br>
        <input type="text" id="code" name="code" required><br><br>

        <label for="polymer">Polymer:</label><br>
        <input type="text" id="polymer" name="polymer" required><br><br>

        <label for="colour">Colour:</label><br>
        <input type="text" id="colour" name="colour" required><br><br>

        <label for="weightD">Weight of RD Bottle with IP (without Tare):</label><br>
        <input type="number" step="0.01" id="weightD" name="weightD" required><br><br>

        <label for="weightE">Weight of Material with Tare RD Bottle:</label><br>
        <input type="number" step="0.01" id="weightE" name="weightE" required><br><br>

        <label for="weightF">Weight of Granule in IP (without Tare):</label><br>
        <input type="number" step="0.01" id="weightF" name="weightF" required><br><br>

        <input type="submit" value="Calculate">
    </form>

    <div id="result" style="margin-top: 20px; font-weight: bold;"></div>
</body>
</html>
